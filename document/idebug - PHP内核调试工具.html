<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>idebug - PHP内核调试工具</title>
<link rel="stylesheet" type="text/css" href="static/css/base.lib.min.css">
<link rel="stylesheet" type="text/css" href="static/css/prettify-cmd.css">
<link rel="stylesheet" type="text/css" href="static/css/layout.min.css">
</head>
<body>
<div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="j4qn" id="idebug-php内核调试工具">idebug - PHP内核调试工具</h1><hr><p data-anchor-id="tyt5">idebug 是一个帮助 PHP 内核或扩展开发人员的调试工具，可以通过该工具查看 PHP 内部变量，深入了解 PHP 的工作原理。在使用这个工具之前，希望你先对 PHP 内核结构及源码有所了解，方能更好地使用本工具。</p><div class="md-section-divider"></div><h2 data-anchor-id="oui2" id="初衷">初衷</h2><p data-anchor-id="r24k">开发本工具的目的，是因为在开发 PHP 扩展中经常会遇到段错误，使用 GDB 调试太繁琐，而另一个成熟的内核调试工具 xdebug 没有我需要的功能，自己编写一个调试工具可以更加了解 PHP 内部机制。</p><div class="md-section-divider"></div><h2 data-anchor-id="g348" id="编译安装-idebug-工具">编译安装 idebug 工具</h2><div class="md-section-divider"></div><h3 data-anchor-id="yg04" id="1-获取-idebug-源码">1. 获取 idebug 源码</h3><p data-anchor-id="6cew">访问 <a href="https://github.com/miaojuanfeng/idebug" target="_blank">Github</a> 获得 idebug 框架源码安装包。</p><div class="md-section-divider"></div><h3 data-anchor-id="zci7" id="2-编译-idebug-源码">2. 编译 idebug 源码</h3><p data-anchor-id="prtu">编译安装 PHP 扩展有两种方式：</p><p data-anchor-id="mfgt">一种是静态编译，在编译 PHP 时将扩展一起编译进 PHP 程序中。因为扩展编译进了 PHP 中，所以这种编译方式的优点是加载更快，同样缺点也很明显，扩展更新后需要连同 PHP 一起重新编译。</p><p data-anchor-id="fk3q">另外一种是动态编译，也就是将扩展编译成动态链接库，在 PHP 启动后再加载。这种编译方式的优点是，更新了扩展后，只需要重新编译扩展，并且编译成动态链接库可以多进程共享内存，减少内存使用，缺点仅仅是加载慢一点点而已。</p><p data-anchor-id="2pa1">推荐采用动态编译，需要先编译安装好 PHP 才能采用这种编译方式。</p><div class="md-section-divider"></div><h4 data-anchor-id="fd4z" id="21-在linux-mac下编译安装">2.1. 在Linux / Mac下编译安装</h4><p data-anchor-id="dbdi">使用命令行进入 idebug 源码目录：</p><p data-anchor-id="hkgm">cd idebug <br>
使用 phpize 工具生成编译环境：</p><pre data-anchor-id="ku76"><code>path_to_php/bin/phpize
</code></pre><p data-anchor-id="4nnm">使用 configure 工具配置编译环境：</p><pre data-anchor-id="eoxx"><code>./configure --with-php-config=path_to_php/bin/php-config
</code></pre><p data-anchor-id="hnf8">编译：</p><pre data-anchor-id="2fgq"><code>sudo make
</code></pre><p data-anchor-id="zy7y">安装：</p><pre data-anchor-id="o3ni"><code>sudo make install
</code></pre><p data-anchor-id="awyo">运行成功后便会自动将编译好的扩展文件复制到 PHP 扩展文件夹下。</p><div class="md-section-divider"></div><h4 data-anchor-id="rm2y" id="22-在windows下编译安装">2.2. 在Windows下编译安装</h4><p data-anchor-id="6bdm">编写中...</p><div class="md-section-divider"></div><h3 data-anchor-id="zmw4" id="3-配置-phpini-文件">3. 配置 php.ini 文件</h3><p data-anchor-id="krsi">扩展编译完成，并且已经位于 PHP 扩展文件下，接下来就是通知 PHP 启动时加载扩展，编辑 PHP 的配置文件 php.ini，添加：</p><pre data-anchor-id="qbmf"><code>extension=idebug.so
</code></pre><p data-anchor-id="3flj">之后便可检查一下 PHP 是否成功加载了 idebug 扩展，在命令行中运行 PHP 程序：</p><pre data-anchor-id="ayk4"><code>path_to_php/bin/php -m
</code></pre><p data-anchor-id="8iyt">命令运行后如果在输出的列表中看到有 idebug 表示扩展成功加载，如果没有成功加载，可以检查下 php.ini 配置中的 extension_dir 项。</p><div class="md-section-divider"></div><h2 data-anchor-id="evxk" id="功能函数">功能函数</h2><div class="md-section-divider"></div><h3 data-anchor-id="9z0m" id="1-idebugsymboltable">1. idebug_symbol_table</h3><p data-anchor-id="g3i7">功能：输出全局符号表中的所有变量，打印输出结果。</p><p data-anchor-id="ojgz">声明：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="zvso"><ol class="linenums"><li class="L0"><code class="language-php"><span class="com">/**</span></code></li><li class="L1"><code class="language-php"><span class="com">* Print global symbol table</span></code></li><li class="L2"><code class="language-php"><span class="com">*</span></code></li><li class="L3"><code class="language-php"><span class="com">* @return   null</span></code></li><li class="L4"><code class="language-php"><span class="com">*/</span></code></li><li class="L5"><code class="language-php"><span class="pln">idebug_symbol_table</span><span class="pun">();</span></code></li></ol></pre><p data-anchor-id="76zd">使用：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="b0tk"><ol class="linenums"><li class="L0"><code class="language-php"><span class="pun">&lt;?</span><span class="pln">php</span></code></li><li class="L1"><code class="language-php"><span class="pln">    $a </span><span class="pun">=</span><span class="pln"> </span><span class="str">"idebug"</span><span class="pun">;</span></code></li><li class="L2"><code class="language-php"><span class="pln">    $b </span><span class="pun">=</span><span class="pln"> </span><span class="lit">20</span><span class="pun">;</span></code></li><li class="L3"><code class="language-php"><span class="pln">    idebug_symbol_table</span><span class="pun">();</span><span class="pln"> </span></code></li><li class="L4"><code class="language-php"><span class="pun">?&gt;</span></code></li></ol></pre><p data-anchor-id="2c4t">输出：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="1khe"><ol class="linenums"><li class="L0"><code class="language-php"><span class="pln">symbol_table</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">(</span><span class="lit">7</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span></code></li><li class="L1"><code class="language-php"><span class="pln">    </span><span class="com">// 省略内核变量...</span></code></li><li class="L2"><code class="language-php"><span class="pln">    </span><span class="str">'a'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span><span class="pln"> </span><span class="str">"idebug"</span><span class="pun">,</span></code></li><li class="L3"><code class="language-php"><span class="pln">    </span><span class="str">'b'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="lit">20</span><span class="pun">)</span></code></li><li class="L4"><code class="language-php"><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="gbhp" id="2-idebugactivesymboltable">2. idebug_active_symbol_table</h3><p data-anchor-id="kd0s">功能：输出当前符号表中的所有变量，PHP 内核在编译函数或类的成员函数时，会给每个函数分配一个符号表，如果在用户定义的函数内部调用本函数，则会打印输出该函数所有变量。如果在全局作用域下调用本函数，会打印输出全局符号表中的所有变量，与 idebug_symbol_table 函数没有区别。</p><p data-anchor-id="t0oe">声明：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="e9sb"><ol class="linenums"><li class="L0"><code class="language-php"><span class="com">/**</span></code></li><li class="L1"><code class="language-php"><span class="com">* Print active symbol table</span></code></li><li class="L2"><code class="language-php"><span class="com">*</span></code></li><li class="L3"><code class="language-php"><span class="com">* @return   null</span></code></li><li class="L4"><code class="language-php"><span class="com">*/</span></code></li><li class="L5"><code class="language-php"><span class="pln">idebug_active_symbol_table</span><span class="pun">();</span></code></li></ol></pre><p data-anchor-id="ehxd">使用：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="ptg0"><ol class="linenums"><li class="L0"><code class="language-php"><span class="pun">&lt;?</span><span class="pln">php</span></code></li><li class="L1"><code class="language-php"><span class="pln">    $g </span><span class="pun">=</span><span class="pln"> </span><span class="lit">120</span><span class="pun">;</span></code></li><li class="L2"><code class="language-php"><span class="pln">	</span><span class="kwd">function</span><span class="pln"> hello</span><span class="pun">(</span><span class="pln">$name</span><span class="pun">){</span></code></li><li class="L3"><code class="language-php"><span class="pln">        $a </span><span class="pun">=</span><span class="pln"> </span><span class="str">"idebug"</span><span class="pun">;</span></code></li><li class="L4"><code class="language-php"><span class="pln">		$b </span><span class="pun">=</span><span class="pln"> </span><span class="lit">20</span><span class="pun">;</span></code></li><li class="L5"><code class="language-php"><span class="pln">        idebug_active_symbol_table</span><span class="pun">();</span></code></li><li class="L6"><code class="language-php"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code class="language-php"><span class="pln">    hello</span><span class="pun">(</span><span class="str">"miaojuanfeng"</span><span class="pun">);</span></code></li><li class="L8"><code class="language-php"><span class="pln">    idebug_active_symbol_table</span><span class="pun">();</span></code></li><li class="L9"><code class="language-php"><span class="pun">?&gt;</span></code></li></ol></pre><p data-anchor-id="q73t">输出：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="a0ux"><ol class="linenums"><li class="L0"><code class="language-php"><span class="com">// 输出当前符号表</span></code></li><li class="L1"><code class="language-php"><span class="pln">active_symbol_table</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span></code></li><li class="L2"><code class="language-php"><span class="pln">    </span><span class="str">'name'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">(</span><span class="lit">12</span><span class="pun">)</span><span class="pln"> </span><span class="str">"miaojuanfeng"</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L3"><code class="language-php"><span class="pln">    </span><span class="str">'a'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">(</span><span class="lit">6</span><span class="pun">)</span><span class="pln"> </span><span class="str">"idebug"</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L4"><code class="language-php"><span class="pln">    </span><span class="str">'b'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="lit">20</span><span class="pun">)</span></code></li><li class="L5"><code class="language-php"><span class="pun">}</span></code></li><li class="L6"><code class="language-php"><span class="com">// 输出全局符号表</span></code></li><li class="L7"><code class="language-php"><span class="pln">active_symbol_table</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">(</span><span class="lit">8</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span></code></li><li class="L8"><code class="language-php"><span class="pln">    </span><span class="com">// 省略内核变量...</span></code></li><li class="L9"><code class="language-php"><span class="pln">    </span><span class="str">'g'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="lit">120</span><span class="pun">)</span></code></li><li class="L0"><code class="language-php"><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="e5yg" id="3-idebugfunctiontable">3. idebug_function_table</h3><p data-anchor-id="bx7s">功能：遍历函数符号表，打印输出全部已定义的函数名称。因为内核函数和用户自定义函数都保存在同一张哈希表中，所以打印出的结果包含内核函数和用户自定义函数。</p><p data-anchor-id="0bkp">声明：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="2ugf"><ol class="linenums"><li class="L0"><code class="language-php"><span class="com">/**</span></code></li><li class="L1"><code class="language-php"><span class="com">* Print function table</span></code></li><li class="L2"><code class="language-php"><span class="com">*</span></code></li><li class="L3"><code class="language-php"><span class="com">* @return   null</span></code></li><li class="L4"><code class="language-php"><span class="com">*/</span></code></li><li class="L5"><code class="language-php"><span class="pln">idebug_function_table</span><span class="pun">();</span></code></li></ol></pre><p data-anchor-id="9dbz">使用：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="e332"><ol class="linenums"><li class="L0"><code class="language-php"><span class="pun">&lt;?</span><span class="pln">php</span></code></li><li class="L1"><code class="language-php"><span class="pln">    </span><span class="kwd">function</span><span class="pln"> hello</span><span class="pun">(</span><span class="pln">$name</span><span class="pun">){</span></code></li><li class="L2"><code class="language-php"><span class="pln">		$a </span><span class="pun">=</span><span class="pln"> </span><span class="str">"idebug"</span><span class="pun">;</span></code></li><li class="L3"><code class="language-php"><span class="pln">		$b </span><span class="pun">=</span><span class="pln"> </span><span class="lit">20</span><span class="pun">;</span></code></li><li class="L4"><code class="language-php"><span class="pln">        idebug_active_symbol_table</span><span class="pun">();</span></code></li><li class="L5"><code class="language-php"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code class="language-php"><span class="pln">    idebug_function_table</span><span class="pun">();</span></code></li><li class="L7"><code class="language-php"><span class="pun">?&gt;</span></code></li></ol></pre><p data-anchor-id="xjx3">输出：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="lhqw"><ol class="linenums"><li class="L0"><code class="language-php"><span class="pln">function_table</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">(</span><span class="pln"> </span></code></li><li class="L1"><code class="language-php"><span class="pln">    </span><span class="str">'zend_version'</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L2"><code class="language-php"><span class="pln">    </span><span class="str">'func_num_args'</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L3"><code class="language-php"><span class="pln">    </span><span class="str">'func_get_arg'</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L4"><code class="language-php"><span class="pln">    </span><span class="com">// 省略其他内核函数...</span></code></li><li class="L5"><code class="language-php"><span class="pln">    </span><span class="str">'mysqli_affected_rows'</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L6"><code class="language-php"><span class="pln">    </span><span class="str">'mysqli_autocommit'</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L7"><code class="language-php"><span class="pln">    </span><span class="str">'mysqli_character_set_name'</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L8"><code class="language-php"><span class="pln">    </span><span class="com">// 用户自定义函数</span></code></li><li class="L9"><code class="language-php"><span class="pln">    </span><span class="str">'hello'</span><span class="pln"> </span></code></li><li class="L0"><code class="language-php"><span class="pun">)</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="hp5p" id="4-idebugclasstable">4. idebug_class_table</h3><p data-anchor-id="lalh">功能：遍历类符号表，打印输出全部已定义的类名称。因为内核类和用户自定义类都保存在同一张哈希表中，所以打印出的结果包含内核类和用户自定义类。</p><p data-anchor-id="1h3j">声明：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="un03"><ol class="linenums"><li class="L0"><code class="language-php"><span class="com">/**</span></code></li><li class="L1"><code class="language-php"><span class="com">* Print class table</span></code></li><li class="L2"><code class="language-php"><span class="com">*</span></code></li><li class="L3"><code class="language-php"><span class="com">* @return   null</span></code></li><li class="L4"><code class="language-php"><span class="com">*/</span></code></li><li class="L5"><code class="language-php"><span class="pln">idebug_class_table</span><span class="pun">();</span></code></li></ol></pre><p data-anchor-id="jpuw">使用：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="cmwr"><ol class="linenums"><li class="L0"><code class="language-php"><span class="pun">&lt;?</span><span class="pln">php</span></code></li><li class="L1"><code class="language-php"><span class="pln">    </span><span class="kwd">class</span><span class="pln"> person</span><span class="pun">{</span></code></li><li class="L2"><code class="language-php"><span class="pln">        </span><span class="kwd">private</span><span class="pln"> $name</span><span class="pun">;</span></code></li><li class="L3"><code class="language-php"><span class="pln">        </span><span class="kwd">private</span><span class="pln"> $age</span><span class="pun">;</span></code></li><li class="L4"><code class="language-php"></code></li><li class="L5"><code class="language-php"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> set_name</span><span class="pun">(</span><span class="pln">$name</span><span class="pun">){</span></code></li><li class="L6"><code class="language-php"><span class="pln">			$this</span><span class="pun">-&gt;</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> $name</span><span class="pun">;</span></code></li><li class="L7"><code class="language-php"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L8"><code class="language-php"></code></li><li class="L9"><code class="language-php"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> set_age</span><span class="pun">(</span><span class="pln">$age</span><span class="pun">){</span></code></li><li class="L0"><code class="language-php"><span class="pln">			$this</span><span class="pun">-&gt;</span><span class="pln">age </span><span class="pun">=</span><span class="pln"> $age</span><span class="pun">;</span></code></li><li class="L1"><code class="language-php"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L2"><code class="language-php"></code></li><li class="L3"><code class="language-php"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> get_name</span><span class="pun">(){</span></code></li><li class="L4"><code class="language-php"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> $this</span><span class="pun">-&gt;</span><span class="pln">name</span><span class="pun">;</span></code></li><li class="L5"><code class="language-php"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L6"><code class="language-php"></code></li><li class="L7"><code class="language-php"><span class="pln">        </span><span class="kwd">public</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> get_age</span><span class="pun">(){</span></code></li><li class="L8"><code class="language-php"><span class="pln">            </span><span class="kwd">return</span><span class="pln"> $this</span><span class="pun">-&gt;</span><span class="pln">age</span><span class="pun">;</span></code></li><li class="L9"><code class="language-php"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L0"><code class="language-php"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1"><code class="language-php"><span class="pln">    idebug_class_table</span><span class="pun">();</span></code></li><li class="L2"><code class="language-php"><span class="pun">?&gt;</span></code></li></ol></pre><p data-anchor-id="0dyr">输出：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="1uvp"><ol class="linenums"><li class="L0"><code class="language-php"><span class="pln">class_table</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">(</span><span class="pln"> </span></code></li><li class="L1"><code class="language-php"><span class="pln">    </span><span class="str">'stdclass'</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L2"><code class="language-php"><span class="pln">    </span><span class="str">'traversable'</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L3"><code class="language-php"><span class="pln">    </span><span class="com">// 省略其他内核类...</span></code></li><li class="L4"><code class="language-php"><span class="pln">    </span><span class="str">'iteratoraggregate'</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L5"><code class="language-php"><span class="pln">    </span><span class="str">'iterator'</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L6"><code class="language-php"><span class="pln">    </span><span class="str">'arrayaccess'</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L7"><code class="language-php"><span class="pln">    </span><span class="com">// 用户定义类</span></code></li><li class="L8"><code class="language-php"><span class="pln">    </span><span class="str">'person'</span><span class="pln"> </span></code></li><li class="L9"><code class="language-php"><span class="pun">)</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="sgxo" id="5-idebugconstanttable">5. idebug_constant_table</h3><p data-anchor-id="l1z8">功能： 打印输出常量表。</p><p data-anchor-id="uwvz">声明：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="xrxs"><ol class="linenums"><li class="L0"><code class="language-php"><span class="com">/**</span></code></li><li class="L1"><code class="language-php"><span class="com">* Print constant table</span></code></li><li class="L2"><code class="language-php"><span class="com">*</span></code></li><li class="L3"><code class="language-php"><span class="com">* @return   null</span></code></li><li class="L4"><code class="language-php"><span class="com">*/</span></code></li><li class="L5"><code class="language-php"><span class="pln">idebug_constant_table</span><span class="pun">();</span></code></li></ol></pre><p data-anchor-id="eayp">使用：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="50o2"><ol class="linenums"><li class="L0"><code class="language-php"><span class="pun">&lt;?</span><span class="pln">php</span></code></li><li class="L1"><code class="language-php"><span class="pln">    define</span><span class="pun">(</span><span class="str">'IDEBUG'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'v123'</span><span class="pun">);</span></code></li><li class="L2"><code class="language-php"><span class="pln">    idebug_constant_table</span><span class="pun">();</span></code></li><li class="L3"><code class="language-php"><span class="pun">?&gt;</span><span class="pln">  </span></code></li></ol></pre><p data-anchor-id="o6ka">输出：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="zfow"><ol class="linenums"><li class="L0"><code class="language-php"><span class="pln">constant_table</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">(</span><span class="lit">574</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span></code></li><li class="L1"><code class="language-php"><span class="pln">    </span><span class="str">'E_ERROR'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="lit">1</span><span class="pun">),</span><span class="pln"> </span></code></li><li class="L2"><code class="language-php"><span class="pln">    </span><span class="str">'E_WARNING'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="lit">2</span><span class="pun">),</span><span class="pln"> </span></code></li><li class="L3"><code class="language-php"><span class="pln">    </span><span class="str">'E_PARSE'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="lit">4</span><span class="pun">),</span><span class="pln"> </span></code></li><li class="L4"><code class="language-php"><span class="pln">    </span><span class="str">'E_NOTICE'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="lit">8</span><span class="pun">),</span><span class="pln"> </span></code></li><li class="L5"><code class="language-php"><span class="pln">    </span><span class="com">// 省略其他内核常量...</span></code></li><li class="L6"><code class="language-php"><span class="pln">    </span><span class="str">'MYSQLI_REPORT_OFF'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="lit">0</span><span class="pun">),</span><span class="pln"> </span></code></li><li class="L7"><code class="language-php"><span class="pln">    </span><span class="com">// 用户自定义常量</span></code></li><li class="L8"><code class="language-php"><span class="pln">    </span><span class="str">'IDEBUG'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span><span class="pln"> </span><span class="str">"v123"</span></code></li><li class="L9"><code class="language-php"><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="8nd9" id="6-idebugincludedfiles">6. idebug_included_files</h3><p data-anchor-id="dmrq">功能：打印输出当前包含的所有文件。</p><p data-anchor-id="nt8i">声明：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="v66f"><ol class="linenums"><li class="L0"><code class="language-php"><span class="com">/**</span></code></li><li class="L1"><code class="language-php"><span class="com">* Print included files table</span></code></li><li class="L2"><code class="language-php"><span class="com">*</span></code></li><li class="L3"><code class="language-php"><span class="com">* @return   null</span></code></li><li class="L4"><code class="language-php"><span class="com">*/</span></code></li><li class="L5"><code class="language-php"><span class="pln">idebug_included_files</span><span class="pun">();</span></code></li></ol></pre><p data-anchor-id="77hj">使用：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="o0vw"><ol class="linenums"><li class="L0"><code class="language-php"><span class="pun">&lt;?</span><span class="pln">php</span></code></li><li class="L1"><code class="language-php"><span class="pln">    </span><span class="kwd">require</span><span class="pln"> </span><span class="str">"bug.php"</span><span class="pun">;</span></code></li><li class="L2"><code class="language-php"><span class="pln">    idebug_included_files</span><span class="pun">();</span></code></li><li class="L3"><code class="language-php"><span class="pun">?&gt;</span></code></li></ol></pre><p data-anchor-id="p3aj">输出：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="pqwe"><ol class="linenums"><li class="L0"><code class="language-php"><span class="pln">included_files_table</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">(</span><span class="pln"> </span></code></li><li class="L1"><code class="language-php"><span class="pln">    </span><span class="str">'/home/mjf/Desktop/idebug.php'</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L2"><code class="language-php"><span class="pln">    </span><span class="str">'/home/mjf/Desktop/bug.php'</span><span class="pln"> </span></code></li><li class="L3"><code class="language-php"><span class="pun">)</span></code></li><li class="L4"><code class="language-php"><span class="com">// idebug.php 是当前脚本文件</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="woyw" id="7-idebugfunctioncallstack">7. idebug_function_call_stack</h3><p data-anchor-id="de8k">功能：遍历函数调用栈，打印输出当前函数被调用的过程。</p><p data-anchor-id="8juw">声明：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="vp2p"><ol class="linenums"><li class="L0"><code class="language-php"><span class="com">/**</span></code></li><li class="L1"><code class="language-php"><span class="com">* Print function call stack</span></code></li><li class="L2"><code class="language-php"><span class="com">*</span></code></li><li class="L3"><code class="language-php"><span class="com">* @return   null</span></code></li><li class="L4"><code class="language-php"><span class="com">*/</span></code></li><li class="L5"><code class="language-php"><span class="pln">idebug_function_call_stack</span><span class="pun">();</span></code></li></ol></pre><p data-anchor-id="q29p">使用：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="vykp"><ol class="linenums"><li class="L0"><code class="language-php"><span class="pun">&lt;?</span><span class="pln">php</span></code></li><li class="L1"><code class="language-php"><span class="pln">    </span><span class="kwd">function</span><span class="pln"> f1</span><span class="pun">(){</span></code></li><li class="L2"><code class="language-php"><span class="pln">        f2</span><span class="pun">();</span></code></li><li class="L3"><code class="language-php"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4"><code class="language-php"><span class="pln">    </span><span class="kwd">function</span><span class="pln"> f2</span><span class="pun">(){</span></code></li><li class="L5"><code class="language-php"><span class="pln">        f3</span><span class="pun">();</span></code></li><li class="L6"><code class="language-php"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code class="language-php"><span class="pln">    </span><span class="kwd">function</span><span class="pln"> f3</span><span class="pun">(){</span></code></li><li class="L8"><code class="language-php"><span class="pln">        f4</span><span class="pun">();</span></code></li><li class="L9"><code class="language-php"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0"><code class="language-php"><span class="pln">    </span><span class="kwd">function</span><span class="pln"> f4</span><span class="pun">(){</span></code></li><li class="L1"><code class="language-php"><span class="pln">        idebug_function_call_stack</span><span class="pun">();</span></code></li><li class="L2"><code class="language-php"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3"><code class="language-php"><span class="pln">    f1</span><span class="pun">();</span></code></li><li class="L4"><code class="language-php"><span class="pun">?&gt;</span></code></li></ol></pre><p data-anchor-id="mtyo">输出：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="gbpt"><ol class="linenums"><li class="L0"><code class="language-php"><span class="pln">function_stack</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Stack</span><span class="pun">(</span><span class="pln"> </span><span class="str">'f1'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'f2'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'f3'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'f4'</span><span class="pln"> </span><span class="pun">)</span></code></li></ol></pre><p data-anchor-id="30m3">函数f1调用了函数f2，函数f2调用了函数f3，函数f3调用了函数f4。</p><div class="md-section-divider"></div><h3 data-anchor-id="9d4v" id="8-idebugfunctionargs">8. idebug_function_args</h3><p data-anchor-id="0cuo">功能：遍历函数参数栈，按顺序输出参数栈中的参数值。</p><p data-anchor-id="667m">声明：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="shzy"><ol class="linenums"><li class="L0"><code class="language-php"><span class="com">/**</span></code></li><li class="L1"><code class="language-php"><span class="com">* Print function args</span></code></li><li class="L2"><code class="language-php"><span class="com">*</span></code></li><li class="L3"><code class="language-php"><span class="com">* @return   null</span></code></li><li class="L4"><code class="language-php"><span class="com">*/</span></code></li><li class="L5"><code class="language-php"><span class="pln">idebug_function_args</span><span class="pun">();</span></code></li></ol></pre><p data-anchor-id="xrqq">使用：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="u5nw"><ol class="linenums"><li class="L0"><code class="language-php"><span class="pun">&lt;?</span><span class="pln">php</span></code></li><li class="L1"><code class="language-php"><span class="pln">    </span><span class="kwd">function</span><span class="pln"> hello</span><span class="pun">(</span><span class="pln">$name</span><span class="pun">,</span><span class="pln"> $age</span><span class="pun">,</span><span class="pln"> $address</span><span class="pun">){</span></code></li><li class="L2"><code class="language-php"><span class="pln">        idebug_function_args</span><span class="pun">();</span></code></li><li class="L3"><code class="language-php"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4"><code class="language-php"><span class="pln">    hello</span><span class="pun">(</span><span class="str">"miaojuanfeng"</span><span class="pun">,</span><span class="pln"> </span><span class="lit">20</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Guangzhou"</span><span class="pun">);</span></code></li><li class="L5"><code class="language-php"><span class="pun">?&gt;</span></code></li></ol></pre><p data-anchor-id="pb7l">输出：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="ycgm"><ol class="linenums"><li class="L0"><code class="language-php"><span class="pln">function_args</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Args</span><span class="pun">(</span><span class="pln"> </span><span class="str">'miaojuanfeng'</span><span class="pln"> </span><span class="pun">,</span><span class="pln"> </span><span class="lit">20</span><span class="pln"> </span><span class="pun">,</span><span class="pln"> </span><span class="str">'Guangzhou'</span><span class="pln"> </span><span class="pun">)</span></code></li></ol></pre></div>
</body>
</html>